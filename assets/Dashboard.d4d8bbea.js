import{K as E,d as x,j as w,L as z,M as A,N as B,O as k,o as h,b as D,w as c,e as r,i,t as s,h as f,f as L,C as b}from"./vendor.509dfdc2.js";import{_ as q,a as F}from"./index.1a7de0ad.js";import"https://at.alicdn.com/t/font_3317867_0i6s39wwemwi.js";const d=E.create({baseURL:"https://localhost:2077/api/",headers:{}});d.interceptors.request.use(e=>e,e=>Promise.reject(e));d.interceptors.response.use(e=>e,e=>Promise.reject(e));const j=e=>d({url:"https://api.openweathermap.org/data/2.5/weather",method:"get",params:e}),M=e=>d({url:"https://api.openweathermap.org/geo/1.0/reverse",method:"get",params:e});var N=new Map([["01d","qingtianbaitian"],["01n","qingtianyewan"],["02d","qingzhuanduoyunbaitian"],["02n","qingzhuanduoyunyewan"],["03d","yintian"],["03n","yintian"],["04d","cloudy-01"],["04n","cloudy-01"],["09d","dayu"],["09n","dayu"],["10d","duoyunzhuanyubaitian"],["10n","duoyunzhuanyuyewan"],["11d","shandian"],["11n","shandian"],["13d","zhongxue"],["13n","zhongxue"],["50d","wu"],["50n","wu"]]);const P={key:0},W={key:1},V=b(" \u52A0\u8F7D\u4E2D... "),K=x({setup(e){const l=w({lat:0,lon:0,name:""}),n=w(),_=o=>{j({lat:o.lat,lon:o.lon,appid:"ad58f7987b7d9c53ca4d2f53bc36e110",units:"metric",lang:"zh_cn"}).then(a=>{n.value=a.data}).catch(a=>{console.log("currentWeather err",a.response)})};return z(()=>{navigator.geolocation.getCurrentPosition(o=>{const{latitude:a,longitude:u}=o.coords;M({lat:a,lon:u,appid:"ad58f7987b7d9c53ca4d2f53bc36e110"}).then(t=>{l.value={name:t.data[0].local_names.zh?t.data[0].local_names.zh:t.data[0].name,lat:a,lon:u},_({lat:a,lon:u})}).catch(t=>{console.log("getCityByLatLon err",t)}),_({lat:a,lon:u})},o=>{console.log("getCurrentPosition error",o),l.value={name:"\u5317\u4EAC",lat:39.9042,lon:116.4074},_({lat:39.9042,lon:116.4074})},{enableHighAccuracy:!0,timeout:4e3,maximumAge:0})}),(o,a)=>{const u=F,t=A,p=B,C=k;return h(),D(C,{gutter:20},{default:c(()=>[r(p,{span:12},{default:c(()=>[r(t,{class:"weather-board"},{default:c(()=>{var m,g,y,v;return[i("span",null," \u5F53\u524D\u57CE\u5E02: "+s(l.value.name?l.value.name:"\u672A\u9009\u62E9"),1),(m=n.value)!=null&&m.weather?(h(),f("div",P,[r(u,{class:"weather-icon",name:L(N).get(n.value.weather[0].icon)},null,8,["name"]),b(" "+s(n.value.weather[0].description)+" ",1),i("p",null,"\u4F53\u611F\u6E29\u5EA6: "+s((g=n.value)==null?void 0:g.main.feels_like)+" \u2103",1),i("p",null,"\u6E7F\u5EA6: "+s((y=n.value)==null?void 0:y.main.humidity),1),i("p",null,"\u6C14\u538B: "+s((v=n.value)==null?void 0:v.main.pressure),1)])):(h(),f("div",W,[r(u,{class:"weather-icon",name:"icon_wushuju"}),V]))]}),_:1})]),_:1}),r(p,{span:12},{default:c(()=>[r(t,{class:"weather-board"})]),_:1})]),_:1})}}});var O=q(K,[["__scopeId","data-v-437e46d1"]]);export{O as default};
